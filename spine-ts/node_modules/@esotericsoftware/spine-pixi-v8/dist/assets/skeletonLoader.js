/******************************************************************************
 * Spine Runtimes License Agreement
 * Last updated April 5, 2025. Replaces all prior versions.
 *
 * Copyright (c) 2013-2025, Esoteric Software LLC
 *
 * Integration of the Spine Runtimes into software or otherwise creating
 * derivative works of the Spine Runtimes is permitted under the terms and
 * conditions of Section 2 of the Spine Editor License Agreement:
 * http://esotericsoftware.com/spine-editor-license
 *
 * Otherwise, it is permitted to integrate the Spine Runtimes into software
 * or otherwise create derivative works of the Spine Runtimes (collectively,
 * "Products"), provided that each user of the Products must obtain their own
 * Spine Editor license and redistribution of the Products in any form must
 * include this license and copyright notice.
 *
 * THE SPINE RUNTIMES ARE PROVIDED BY ESOTERIC SOFTWARE LLC "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL ESOTERIC SOFTWARE LLC BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES,
 * BUSINESS INTERRUPTION, OR LOSS OF USE, DATA, OR PROFITS) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THE SPINE RUNTIMES, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *****************************************************************************/
import { checkExtension, DOMAdapter, ExtensionType, extensions, LoaderParserPriority } from 'pixi.js';
const loaderName = "spineSkeletonLoader";
function isJson(resource) {
    return Object.prototype.hasOwnProperty.call(resource, 'bones');
}
function isBuffer(resource) {
    return resource instanceof Uint8Array;
}
const spineLoaderExtension = {
    extension: ExtensionType.Asset,
    loader: {
        id: loaderName,
        name: loaderName,
        extension: {
            type: ExtensionType.LoadParser,
            priority: LoaderParserPriority.Normal,
            name: loaderName,
        },
        test(url) {
            return checkExtension(url, '.skel');
        },
        async load(url) {
            const response = await DOMAdapter.get().fetch(url);
            const buffer = new Uint8Array(await response.arrayBuffer());
            return buffer;
        },
        testParse(asset, options) {
            const isJsonSpineModel = checkExtension(options.src, '.json') && isJson(asset);
            const isBinarySpineModel = checkExtension(options.src, '.skel') && isBuffer(asset);
            const isExplicitLoadParserSet = options.parser === loaderName || options.loadParser === loaderName;
            return Promise.resolve(isJsonSpineModel || isBinarySpineModel || isExplicitLoadParserSet);
        },
    },
};
extensions.add(spineLoaderExtension);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tlbGV0b25Mb2FkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvYXNzZXRzL3NrZWxldG9uTG9hZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K0VBMkIrRTtBQUUvRSxPQUFPLEVBRU4sY0FBYyxFQUNkLFVBQVUsRUFDVixhQUFhLEVBQ2IsVUFBVSxFQUNWLG9CQUFvQixFQUVwQixNQUFNLFNBQVMsQ0FBQztBQUtqQixNQUFNLFVBQVUsR0FBRyxxQkFBcUIsQ0FBQztBQUV6QyxTQUFTLE1BQU0sQ0FBRSxRQUFhO0lBQzdCLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUNoRSxDQUFDO0FBRUQsU0FBUyxRQUFRLENBQUUsUUFBYTtJQUMvQixPQUFPLFFBQVEsWUFBWSxVQUFVLENBQUM7QUFDdkMsQ0FBQztBQUVELE1BQU0sb0JBQW9CLEdBQTREO0lBQ3JGLFNBQVMsRUFBRSxhQUFhLENBQUMsS0FBSztJQUU5QixNQUFNLEVBQUU7UUFDUCxFQUFFLEVBQUUsVUFBVTtRQUNkLElBQUksRUFBRSxVQUFVO1FBQ2hCLFNBQVMsRUFBRTtZQUNWLElBQUksRUFBRSxhQUFhLENBQUMsVUFBVTtZQUM5QixRQUFRLEVBQUUsb0JBQW9CLENBQUMsTUFBTTtZQUNyQyxJQUFJLEVBQUUsVUFBVTtTQUNoQjtRQUVELElBQUksQ0FBRSxHQUFHO1lBQ1IsT0FBTyxjQUFjLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3JDLENBQUM7UUFFRCxLQUFLLENBQUMsSUFBSSxDQUFFLEdBQVc7WUFDdEIsTUFBTSxRQUFRLEdBQUcsTUFBTSxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRW5ELE1BQU0sTUFBTSxHQUFHLElBQUksVUFBVSxDQUFDLE1BQU0sUUFBUSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7WUFFNUQsT0FBTyxNQUFNLENBQUM7UUFDZixDQUFDO1FBQ0QsU0FBUyxDQUFFLEtBQWMsRUFBRSxPQUFzQjtZQUNoRCxNQUFNLGdCQUFnQixHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsR0FBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNoRixNQUFNLGtCQUFrQixHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsR0FBSSxFQUFFLE9BQU8sQ0FBQyxJQUFJLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNwRixNQUFNLHVCQUF1QixHQUFHLE9BQU8sQ0FBQyxNQUFNLEtBQUssVUFBVSxJQUFJLE9BQU8sQ0FBQyxVQUFVLEtBQUssVUFBVSxDQUFDO1lBRW5HLE9BQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsSUFBSSxrQkFBa0IsSUFBSSx1QkFBdUIsQ0FBQyxDQUFDO1FBQzNGLENBQUM7S0FDRDtDQUMwRCxDQUFDO0FBRTdELFVBQVUsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIFNwaW5lIFJ1bnRpbWVzIExpY2Vuc2UgQWdyZWVtZW50XG4gKiBMYXN0IHVwZGF0ZWQgQXByaWwgNSwgMjAyNS4gUmVwbGFjZXMgYWxsIHByaW9yIHZlcnNpb25zLlxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxMy0yMDI1LCBFc290ZXJpYyBTb2Z0d2FyZSBMTENcbiAqXG4gKiBJbnRlZ3JhdGlvbiBvZiB0aGUgU3BpbmUgUnVudGltZXMgaW50byBzb2Z0d2FyZSBvciBvdGhlcndpc2UgY3JlYXRpbmdcbiAqIGRlcml2YXRpdmUgd29ya3Mgb2YgdGhlIFNwaW5lIFJ1bnRpbWVzIGlzIHBlcm1pdHRlZCB1bmRlciB0aGUgdGVybXMgYW5kXG4gKiBjb25kaXRpb25zIG9mIFNlY3Rpb24gMiBvZiB0aGUgU3BpbmUgRWRpdG9yIExpY2Vuc2UgQWdyZWVtZW50OlxuICogaHR0cDovL2Vzb3Rlcmljc29mdHdhcmUuY29tL3NwaW5lLWVkaXRvci1saWNlbnNlXG4gKlxuICogT3RoZXJ3aXNlLCBpdCBpcyBwZXJtaXR0ZWQgdG8gaW50ZWdyYXRlIHRoZSBTcGluZSBSdW50aW1lcyBpbnRvIHNvZnR3YXJlXG4gKiBvciBvdGhlcndpc2UgY3JlYXRlIGRlcml2YXRpdmUgd29ya3Mgb2YgdGhlIFNwaW5lIFJ1bnRpbWVzIChjb2xsZWN0aXZlbHksXG4gKiBcIlByb2R1Y3RzXCIpLCBwcm92aWRlZCB0aGF0IGVhY2ggdXNlciBvZiB0aGUgUHJvZHVjdHMgbXVzdCBvYnRhaW4gdGhlaXIgb3duXG4gKiBTcGluZSBFZGl0b3IgbGljZW5zZSBhbmQgcmVkaXN0cmlidXRpb24gb2YgdGhlIFByb2R1Y3RzIGluIGFueSBmb3JtIG11c3RcbiAqIGluY2x1ZGUgdGhpcyBsaWNlbnNlIGFuZCBjb3B5cmlnaHQgbm90aWNlLlxuICpcbiAqIFRIRSBTUElORSBSVU5USU1FUyBBUkUgUFJPVklERUQgQlkgRVNPVEVSSUMgU09GVFdBUkUgTExDIFwiQVMgSVNcIiBBTkQgQU5ZXG4gKiBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG4gKiBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG4gKiBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBFU09URVJJQyBTT0ZUV0FSRSBMTEMgQkUgTElBQkxFIEZPUiBBTllcbiAqIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4gKiAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVMsXG4gKiBCVVNJTkVTUyBJTlRFUlJVUFRJT04sIE9SIExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTKSBIT1dFVkVSIENBVVNFRCBBTkRcbiAqIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4gKiAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0ZcbiAqIFRIRSBTUElORSBSVU5USU1FUywgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRSBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHtcblx0dHlwZSBBc3NldEV4dGVuc2lvbixcblx0Y2hlY2tFeHRlbnNpb24sXG5cdERPTUFkYXB0ZXIsXG5cdEV4dGVuc2lvblR5cGUsXG5cdGV4dGVuc2lvbnMsXG5cdExvYWRlclBhcnNlclByaW9yaXR5LFxuXHR0eXBlIFJlc29sdmVkQXNzZXRcbn0gZnJvbSAncGl4aS5qcyc7XG5cbnR5cGUgU2tlbGV0b25Kc29uQXNzZXQgPSBhbnk7XG50eXBlIFNrZWxldG9uQmluYXJ5QXNzZXQgPSBVaW50OEFycmF5O1xuXG5jb25zdCBsb2FkZXJOYW1lID0gXCJzcGluZVNrZWxldG9uTG9hZGVyXCI7XG5cbmZ1bmN0aW9uIGlzSnNvbiAocmVzb3VyY2U6IGFueSk6IHJlc291cmNlIGlzIFNrZWxldG9uSnNvbkFzc2V0IHtcblx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXNvdXJjZSwgJ2JvbmVzJyk7XG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyIChyZXNvdXJjZTogYW55KTogcmVzb3VyY2UgaXMgU2tlbGV0b25CaW5hcnlBc3NldCB7XG5cdHJldHVybiByZXNvdXJjZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXk7XG59XG5cbmNvbnN0IHNwaW5lTG9hZGVyRXh0ZW5zaW9uOiBBc3NldEV4dGVuc2lvbjxTa2VsZXRvbkpzb25Bc3NldCB8IFNrZWxldG9uQmluYXJ5QXNzZXQ+ID0ge1xuXHRleHRlbnNpb246IEV4dGVuc2lvblR5cGUuQXNzZXQsXG5cblx0bG9hZGVyOiB7XG5cdFx0aWQ6IGxvYWRlck5hbWUsXG5cdFx0bmFtZTogbG9hZGVyTmFtZSxcblx0XHRleHRlbnNpb246IHtcblx0XHRcdHR5cGU6IEV4dGVuc2lvblR5cGUuTG9hZFBhcnNlcixcblx0XHRcdHByaW9yaXR5OiBMb2FkZXJQYXJzZXJQcmlvcml0eS5Ob3JtYWwsXG5cdFx0XHRuYW1lOiBsb2FkZXJOYW1lLFxuXHRcdH0sXG5cblx0XHR0ZXN0ICh1cmwpIHtcblx0XHRcdHJldHVybiBjaGVja0V4dGVuc2lvbih1cmwsICcuc2tlbCcpO1xuXHRcdH0sXG5cblx0XHRhc3luYyBsb2FkICh1cmw6IHN0cmluZyk6IFByb21pc2U8U2tlbGV0b25CaW5hcnlBc3NldD4ge1xuXHRcdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCBET01BZGFwdGVyLmdldCgpLmZldGNoKHVybCk7XG5cblx0XHRcdGNvbnN0IGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCkpO1xuXG5cdFx0XHRyZXR1cm4gYnVmZmVyO1xuXHRcdH0sXG5cdFx0dGVzdFBhcnNlIChhc3NldDogdW5rbm93biwgb3B0aW9uczogUmVzb2x2ZWRBc3NldCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuXHRcdFx0Y29uc3QgaXNKc29uU3BpbmVNb2RlbCA9IGNoZWNrRXh0ZW5zaW9uKG9wdGlvbnMuc3JjISwgJy5qc29uJykgJiYgaXNKc29uKGFzc2V0KTtcblx0XHRcdGNvbnN0IGlzQmluYXJ5U3BpbmVNb2RlbCA9IGNoZWNrRXh0ZW5zaW9uKG9wdGlvbnMuc3JjISwgJy5za2VsJykgJiYgaXNCdWZmZXIoYXNzZXQpO1xuXHRcdFx0Y29uc3QgaXNFeHBsaWNpdExvYWRQYXJzZXJTZXQgPSBvcHRpb25zLnBhcnNlciA9PT0gbG9hZGVyTmFtZSB8fCBvcHRpb25zLmxvYWRQYXJzZXIgPT09IGxvYWRlck5hbWU7XG5cblx0XHRcdHJldHVybiBQcm9taXNlLnJlc29sdmUoaXNKc29uU3BpbmVNb2RlbCB8fCBpc0JpbmFyeVNwaW5lTW9kZWwgfHwgaXNFeHBsaWNpdExvYWRQYXJzZXJTZXQpO1xuXHRcdH0sXG5cdH0sXG59IGFzIEFzc2V0RXh0ZW5zaW9uPFNrZWxldG9uSnNvbkFzc2V0IHwgU2tlbGV0b25CaW5hcnlBc3NldD47XG5cbmV4dGVuc2lvbnMuYWRkKHNwaW5lTG9hZGVyRXh0ZW5zaW9uKTtcbiJdfQ==